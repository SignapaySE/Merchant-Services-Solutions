<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />

  <!-- Force browsers to always revalidate HTML -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Merchant Services Solutions</title>

  <!-- Tailwind via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Minimal aesthetic add-ons: keeps original layout/flow intact -->
  <style>
    .button-3d{
      background:
        radial-gradient(200% 140% at 0% 0%, rgba(105,247,208,0.10), rgba(105,247,208,0) 35%),
        radial-gradient(180% 120% at 100% 0%, rgba(84,214,255,0.14), rgba(84,214,255,0) 40%);
      box-shadow: 0 12px 26px -12px rgba(84,214,255,0.25);
      border-color: rgba(84,214,255,0.25) !important;
    }
    .button-3d:hover{ box-shadow: 0 16px 34px -14px rgba(84,214,255,0.35); }

    .icon-glow { position:relative; display:inline-flex; align-items:center; justify-content:center; }
    .icon-glow::before{
      content:""; position:absolute; inset:-8px; border-radius:999px;
      background: radial-gradient(50% 50% at 50% 50%, rgba(84,214,255,0.28), rgba(84,214,255,0) 70%);
      filter: blur(8px); z-index:0;
    }
    .icon-glow > * { position: relative; z-index: 1; }
  </style>
</head>

<body class="min-h-screen font-sans text-white bg-slate-900">
  <div class="mx-auto max-w-5xl p-4 pb-[env(safe-area-inset-bottom)]">

    <!-- Header (unchanged structure) -->
    <header class="relative mb-6 rounded-3xl bg-gradient-to-r from-blue-700 to-blue-500 p-4 sm:p-6 text-white shadow-sm pr-32 md:pr-44">
      <div class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
        <div class="flex-1 min-w-0">
          <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight leading-tight">
            Merchant <br class="hidden sm:block"/> Services Solutions
          </h1>
          <p class="text-sm md:text-base text-white/90">Find the perfect product</p>
        </div>
      </div>

      <!-- Badge (keep one) -->
      <div class="absolute bottom-3 right-3 rounded-full border border-white/15 bg-white/10 px-3 py-1.5 text-xs">
        SignaPay SouthEast
      </div>
    </header>

    <!-- Stepper (original app expects static pills present) -->
    <nav id="stepper" class="flex items-center gap-2 overflow-x-auto py-2 mb-3">
      <div class="rounded-xl border px-3 py-2 border-blue-400 bg-blue-900 text-blue-100">1. Business type</div>
      <div class="rounded-xl border px-3 py-2 border-slate-700 bg-slate-800 text-slate-400">2. Needs</div>
      <div class="rounded-xl border px-3 py-2 border-slate-700 bg-slate-800 text-slate-400">3. Solutions</div>
    </nav>

    <!-- STEP 1: Business type -->
    <section class="rounded-3xl border border-slate-700 bg-slate-800 p-4 sm:p-6 shadow-sm mb-5">
      <div class="mb-4 flex items-center justify-between">
        <h2 class="text-lg font-semibold">Select the type of business you are working with today.</h2>
        <button id="resetBtn" type="button" class="rounded-full border border-white/20 px-3 py-1.5 text-xs hover:border-white/40">
          Reset
        </button>
      </div>
      <div id="step1" class="grid grid-cols-1 gap-4 md:grid-cols-2">
        <!-- JS renders four buttons -->
      </div>
    </section>

    <!-- STEP 2: Needs -->
    <section class="rounded-3xl border border-slate-700 bg-slate-800 p-4 sm:p-6 shadow-sm mb-5">
      <div class="mb-3 flex items-center justify-between gap-3">
        <h2 id="needsTitle" class="text-lg font-semibold">What does this business need?</h2>
        <!-- (Optional) controls; app.js is safe if these are absent -->
        <div class="flex flex-wrap gap-2">
          <button id="selectAll" class="rounded-full border border-white/20 px-3 py-1.5 text-xs hover:border-white/40">Select all</button>
          <button id="clearAll"  class="rounded-full border border-white/20 px-3 py-1.5 text-xs hover:border-white/40">Clear all</button>
          <button id="backTo1"   class="rounded-full border border-white/20 px-3 py-1.5 text-xs hover:border-white/40">Back</button>
          <button id="toStep3"   class="rounded-full border border-white/20 px-3 py-1.5 text-xs hover:border-white/40">See results</button>
        </div>
      </div>
      <div id="step2">
        <div id="needsGrid" class="grid grid-cols-1 gap-3 sm:grid-cols-2 md:grid-cols-3"></div>
      </div>
    </section>

    <!-- STEP 3: Solutions -->
    <section class="rounded-3xl border border-slate-700 bg-slate-800 p-4 sm:p-6 shadow-sm mb-6">
      <div class="mb-4 flex items-center justify-between">
        <h2 class="text-lg font-semibold">Recommended solutions</h2>
        <button id="adjustNeeds" type="button" class="rounded-full border border-white/20 px-3 py-1.5 text-xs hover:border-white/40">
          Adjust needs
        </button>
      </div>
      <div id="step3">
        <div id="solutionsGrid" class="grid grid-cols-1 gap-4 md:grid-cols-2"></div>
      </div>
    </section>

    <!-- Special blocks -->
    <section id="specialBlocksSection" class="rounded-3xl border border-slate-700 bg-slate-800 p-4 sm:p-6 shadow-sm mb-6 hidden">
      <h3 class="text-base font-semibold mb-3">Additional Information</h3>
      <div id="specialBlocksList" class="grid grid-cols-1 gap-3"></div>
    </section>

    <!-- Modal -->
    <div id="modal" class="fixed inset-0 z-50 hidden items-end md:items-center md:justify-center">
      <div class="absolute inset-0 bg-slate-900/70" id="modalBackdrop" tabindex="-1"></div>
      <div class="relative w-full max-w-3xl rounded-t-3xl md:rounded-3xl border border-slate-700 bg-slate-800 p-5 md:p-6 max-h-[85vh] overflow-y-auto">
        <div class="mb-4 flex items-start justify-between gap-4">
          <div>
            <h3 class="text-xl font-bold" id="modalTitle"></h3>
            <p class="text-sm text-white/70">Comprehensive details for this solution</p>
          </div>
          <button id="modalClose" class="rounded-full border border-white/20 px-3 py-1.5 text-xs hover:border-white/40">Close</button>
        </div>

        <div id="modalLinks" class="flex flex-wrap gap-2 mb-4"></div>

        <div class="grid md:grid-cols-2 gap-4">
          <div>
            <h4 class="font-semibold mb-2">Matches your needs</h4>
            <ul id="modalMatches" class="space-y-1 text-sm"></ul>
          </div>
          <div>
            <h4 class="font-semibold mb-2">Doesnâ€™t cover</h4>
            <ul id="modalMisses" class="space-y-1 text-sm text-white/70"></ul>
          </div>
        </div>

        <div id="allFeaturesBlock" class="mt-5">
          <h4 class="font-semibold mb-2">All features</h4>
          <ul id="allFeatures" class="grid grid-cols-1 md:grid-cols-2 gap-2 text-sm"></ul>
        </div>

        <div id="terminalDetails" class="mt-6 hidden"></div>
        <div id="shift4Details" class="mt-6 hidden"></div>
      </div>
    </div>

    <!-- Helper prompt area your app writes into -->
    <div id="categoryPrompt" class="sr-only"><span id="promptText"></span></div>

    <!-- Loader (original versioning pattern) -->
    <script>
      (async () => {
        let v = '';
        try {
          const r = await fetch('./version.txt', { cache: 'no-store' });
          if (r.ok) v = (await r.text()).trim();
        } catch {}

        // Cache-bust solutions.json via fetch wrapper
        const origFetch = window.fetch;
        window.fetch = (input, init) => {
          if (typeof input === 'string' && input.includes('solutions.json') && v) {
            input = input + (input.includes('?') ? '&' : '?') + 'v=' + encodeURIComponent(v);
          }
          return origFetch(input, init);
        };

        // Load the app code with the same version
        const s = document.createElement('script');
        s.type = 'module';
        s.src = 'app.js' + (v ? ('?v=' + encodeURIComponent(v)) : '');
        document.body.appendChild(s);
      })();
    </script>
  </div>
</body>
</html>
