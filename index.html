<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />

  <!-- Force browsers to always revalidate HTML -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Merchant Services Solutions</title>

  <!-- Tailwind via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    /* === your existing styles can stay === */

    /* === 3D / Glow Design Tokens (adds the new look) === */
    :root { color-scheme: dark; }

    body{
      background:
        radial-gradient(1200px 600px at 80% -10%, rgba(84,214,255,0.10), transparent 60%),
        radial-gradient(800px 400px at 10% 0%, rgba(105,247,208,0.08), transparent 60%),
        linear-gradient(180deg, #0B1422 0%, #070E17 60%, #070E17 100%);
      color:#fff;
    }

    /* Card-like container with subtle inner light */
    .surface-3d{
      background: linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0) 40%),
                  radial-gradient(140% 140% at 10% -20%, rgba(84,214,255,0.20), rgba(84,214,255,0) 40%),
                  radial-gradient(120% 120% at 110% 130%, rgba(105,247,208,0.18), rgba(105,247,208,0) 40%),
                  #0F1B2B;
      box-shadow: 0 8px 30px -10px rgba(84,214,255,0.25), inset 0 1px 0 rgba(255,255,255,0.06);
      border: 1px solid rgba(84,214,255,0.10);
      border-radius: 1.25rem;
    }

    /* Big pill buttons with 3D lighting */
    .button-3d{
      background: radial-gradient(200% 140% at 0% 0%, rgba(105,247,208,0.18), rgba(105,247,208,0) 35%),
                  radial-gradient(180% 120% at 100% 0%, rgba(84,214,255,0.22), rgba(84,214,255,0) 40%),
                  linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0) 45%),
                  #121C2B;
      box-shadow: 0 12px 26px -10px rgba(84,214,255,0.30), 0 2px 10px -6px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.08);
      border: 1px solid rgba(84,214,255,0.16);
      border-radius: 1rem;
      transition: transform .15s cubic-bezier(.2,.8,.2,1), box-shadow .2s ease, border-color .2s ease;
    }
    .button-3d:hover{ transform: translateY(-1px); box-shadow: 0 16px 34px -12px rgba(84,214,255,0.36), 0 3px 14px -8px rgba(0,0,0,0.7); border-color: rgba(105,247,208,0.28);}
    .button-3d:active{ transform: translateY(0); box-shadow: 0 8px 18px -10px rgba(84,214,255,0.28), inset 0 6px 10px rgba(0,0,0,0.35); }

    /* Soft halo behind icons */
    .icon-glow { position:relative; }
    .icon-glow::before{
      content:""; position:absolute; inset:-8px; border-radius:999px;
      background: radial-gradient(50% 50% at 50% 50%, rgba(84,214,255,0.35), rgba(84,214,255,0) 70%);
      filter: blur(8px); z-index:0;
    }

    /* Optional: hide horizontal scrollbar on stepper (mobile) */
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
  </style>
</head>

<body class="min-h-screen font-sans">
  <div class="mx-auto max-w-5xl p-4 pb-[env(safe-area-inset-bottom)]">

    <!-- Header -->
    <header class="surface-3d mb-6 p-4 sm:p-6 pr-32 md:pr-44 relative">
      <div class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
        <div class="flex-1 min-w-0">
          <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight leading-tight">
            Merchant <br class="hidden sm:block"/> Services Solutions
          </h1>
          <p class="text-sm md:text-base text-white/70">Find the perfect product</p>
        </div>
      </div>

      <!-- Keep a single badge in the corner (avoid double logo) -->
      <div class="absolute bottom-3 right-3 rounded-full border border-white/15 bg-white/5 px-3 py-1.5 text-xs text-white/90">
        SignaPay SouthEast
      </div>
    </header>

    <!-- Stepper (kept horizontal on mobile) -->
    <nav id="stepper" class="flex items-center gap-2 overflow-x-auto no-scrollbar py-2 mb-3">
      <!-- JS populates pills -->
    </nav>

    <!-- STEP 1: Business type -->
    <section class="surface-3d px-4 md:px-6 py-5 mb-5">
      <div class="mb-4 flex items-center justify-between">
        <h2 class="text-lg font-semibold">Select the type of business you are working with today.</h2>
        <button id="resetBtn" type="button" class="rounded-full border border-white/20 px-3 py-1.5 text-xs hover:border-cyan-300/50">
          Reset
        </button>
      </div>
      <div id="step1" class="grid grid-cols-1 gap-4 md:grid-cols-2">
        <!-- JS renders four big 3D buttons -->
      </div>
    </section>

    <!-- STEP 2: Needs (hidden until a business type is chosen) -->
    <section class="surface-3d px-4 md:px-6 py-5 mb-5">
      <div class="mb-3">
        <h2 id="needsTitle" class="text-lg font-semibold">What does this business need?</h2>
      </div>
      <div id="step2" class="">
        <div id="needsGrid" class="grid grid-cols-1 gap-3 sm:grid-cols-2 md:grid-cols-3"></div>
      </div>
    </section>

    <!-- STEP 3: Solutions -->
    <section class="surface-3d px-4 md:px-6 py-5 mb-6">
      <div class="mb-4 flex items-center justify-between">
        <h2 class="text-lg font-semibold">Recommended solutions</h2>
        <button id="adjustNeeds" type="button" class="rounded-full border border-white/20 px-3 py-1.5 text-xs hover:border-cyan-300/50">
          Adjust needs
        </button>
      </div>
      <div id="step3" class="">
        <div id="solutionsGrid" class="grid grid-cols-1 gap-4 md:grid-cols-2"></div>
      </div>
    </section>

    <!-- Special blocks (if your app uses them) -->
    <section id="specialBlocksSection" class="surface-3d px-4 md:px-6 py-5 mb-6 hidden">
      <h3 class="text-base font-semibold mb-3">Additional Information</h3>
      <div id="specialBlocksList" class="grid grid-cols-1 gap-3"></div>
    </section>

    <!-- Modal -->
    <div id="modal" class="fixed inset-0 z-50 hidden items-end md:items-center md:justify-center">
      <div class="absolute inset-0 bg-slate-900/70" id="modalBackdrop" tabindex="-1"></div>
      <div class="relative w-full max-w-3xl surface-3d md:rounded-3xl rounded-t-3xl p-5 md:p-6 max-h-[85vh] overflow-y-auto">
        <div class="mb-4 flex items-start justify-between gap-4">
          <div>
            <h3 class="text-xl font-bold" id="modalTitle"></h3>
            <p class="text-sm text-white/70">Comprehensive details for this solution</p>
          </div>
          <button id="modalClose" class="rounded-full border border-white/20 px-3 py-1.5 text-xs hover:border-cyan-300/50">Close</button>
        </div>

        <div id="modalLinks" class="flex flex-wrap gap-2 mb-4"></div>

        <div class="grid md:grid-cols-2 gap-4">
          <div>
            <h4 class="font-semibold mb-2">Matches your needs</h4>
            <ul id="modalMatches" class="space-y-1 text-sm"></ul>
          </div>
          <div>
            <h4 class="font-semibold mb-2">Doesnâ€™t cover</h4>
            <ul id="modalMisses" class="space-y-1 text-sm text-white/70"></ul>
          </div>
        </div>

        <div id="allFeaturesBlock" class="mt-5">
          <h4 class="font-semibold mb-2">All features</h4>
          <ul id="allFeatures" class="grid grid-cols-1 md:grid-cols-2 gap-2 text-sm"></ul>
        </div>

        <div id="terminalDetails" class="mt-6 hidden"></div>
        <div id="shift4Details" class="mt-6 hidden"></div>
      </div>
    </div>

    <!-- (Optional) subtle helper prompt area your app references -->
    <div id="categoryPrompt" class="sr-only"><span id="promptText"></span></div>

    <!-- Bootstrapping: version-aware loader for app.js and solutions.json -->
    <script>
      (async () => {
        let v = '';
        try {
          const r = await fetch('./version.txt', { cache: 'no-store' });
          if (r.ok) v = (await r.text()).trim();
        } catch {}

        // Cache-bust solutions.json via fetch wrapper
        const origFetch = window.fetch;
        window.fetch = (input, init) => {
          if (typeof input === 'string' && input.includes('solutions.json') && v) {
            input = input + (input.includes('?') ? '&' : '?') + 'v=' + encodeURIComponent(v);
          }
          return origFetch(input, init);
        };

        // Load the app code with the same version
        const s = document.createElement('script');
        s.type = 'module';
        s.src = 'app.js' + (v ? ('?v=' + encodeURIComponent(v)) : '');
        document.body.appendChild(s);
      })();
    </script>
  </div>
</body>
</html>
